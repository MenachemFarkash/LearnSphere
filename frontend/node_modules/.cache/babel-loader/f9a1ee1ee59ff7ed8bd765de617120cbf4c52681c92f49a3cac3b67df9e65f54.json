{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nbjop\\\\Desktop\\\\HomeWork\\\\SQL\\\\Courses Exercise\\\\frontend\\\\src\\\\Helpers\\\\Context.js\",\n  _s = $RefreshSig$();\nimport { createContext, useState } from \"react\";\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport App from \"../App\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CoursesContext = /*#__PURE__*/createContext();\nconst ContextProvider = () => {\n  _s();\n  const [currentPage, setCurrentPage] = useState(\"register\");\n  const [subjects, setSubjects] = useState([]);\n  const [userCourses, setUserCourses] = useState([]);\n  function checkIfLoggedIn() {\n    const token = localStorage.getItem(\"token\");\n    token ? setCurrentPage(\"main\") : setCurrentPage(\"login\");\n  }\n  async function registerSubmit(ev, email, password, username) {\n    ev.preventDefault();\n    const data = await axios.post(\"http://localhost:4000/api/v1/user\", {\n      email,\n      password,\n      name: username\n    });\n    localStorage.setItem(\"token\", data.data);\n    checkIfLoggedIn();\n  }\n  async function loginSubmit(ev, password, username) {\n    ev.preventDefault();\n    const login = await axios.post(\"http://localhost:4000/api/v1/user/login\", {\n      name: username,\n      password: password\n    });\n    console.log(password);\n    localStorage.setItem(\"token\", login.data);\n    checkIfLoggedIn();\n  }\n  function logOut() {\n    localStorage.removeItem(\"token\");\n    checkIfLoggedIn();\n  }\n  async function showAllCourses() {\n    const {\n      data\n    } = await axios.get(\"http://localhost:4000/api/v1/courses\");\n    return data;\n  }\n  async function showAllUserCourses() {\n    const token = localStorage.getItem(\"token\");\n    const courses = await axios.post(\"http://localhost:4000/api/v1/user/courses\", {\n      token: token\n    });\n    console.log(courses.data);\n    setUserCourses(courses.data);\n  }\n  async function showAllSubjects() {\n    const subjects = await axios.get(\"http://localhost:4000/api/v1/subjects\");\n    try {\n      setSubjects(subjects.data);\n    } catch (err) {\n      console.log(err.message);\n    }\n  }\n  async function deleteCourse(courseName) {\n    const token = localStorage.getItem(\"token\");\n    const headers = {\n      token: token,\n      courseName: courseName\n    };\n    const deleteRequest = await axios.delete(\"http://localhost:4000/api/v1/user\", {\n      headers\n    });\n    console.log(deleteRequest);\n  }\n  async function addCourse(subject) {\n    const token = localStorage.getItem(\"token\");\n    const newCourse = await axios.post(\"http://localhost:4000/api/v1/courses\", {\n      token,\n      subject\n    });\n    console.log(newCourse);\n  }\n  async function changePasswordSubmit(ev, email, password) {\n    ev.preventDefault();\n    const token = localStorage.getItem(\"token\");\n    const login = await axios.post(\"http://localhost:4000/api/v1/user/changePassword\", {\n      email: email,\n      password: password,\n      token: token\n    });\n    console.log(password);\n    checkIfLoggedIn();\n  }\n  return /*#__PURE__*/_jsxDEV(CoursesContext.Provider, {\n    value: {\n      registerSubmit,\n      loginSubmit,\n      currentPage,\n      setCurrentPage,\n      checkIfLoggedIn,\n      logOut,\n      showAllCourses,\n      showAllSubjects,\n      subjects,\n      showAllUserCourses,\n      userCourses,\n      deleteCourse,\n      addCourse,\n      changePasswordSubmit\n    },\n    children: /*#__PURE__*/_jsxDEV(App, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 9\n  }, this);\n};\n_s(ContextProvider, \"lc0r+BnlkHiFJ0i3VxZyqWS6QWU=\");\n_c = ContextProvider;\nexport default ContextProvider;\nvar _c;\n$RefreshReg$(_c, \"ContextProvider\");","map":{"version":3,"names":["createContext","useState","axios","jwt_decode","App","CoursesContext","ContextProvider","currentPage","setCurrentPage","subjects","setSubjects","userCourses","setUserCourses","checkIfLoggedIn","token","localStorage","getItem","registerSubmit","ev","email","password","username","preventDefault","data","post","name","setItem","loginSubmit","login","console","log","logOut","removeItem","showAllCourses","get","showAllUserCourses","courses","showAllSubjects","err","message","deleteCourse","courseName","headers","deleteRequest","delete","addCourse","subject","newCourse","changePasswordSubmit"],"sources":["C:/Users/nbjop/Desktop/HomeWork/SQL/Courses Exercise/frontend/src/Helpers/Context.js"],"sourcesContent":["import { createContext, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport App from \"../App\";\r\nexport const CoursesContext = createContext();\r\nconst ContextProvider = () => {\r\n    const [currentPage, setCurrentPage] = useState(\"register\");\r\n    const [subjects, setSubjects] = useState([]);\r\n    const [userCourses, setUserCourses] = useState([]);\r\n\r\n    function checkIfLoggedIn() {\r\n        const token = localStorage.getItem(\"token\");\r\n        token ? setCurrentPage(\"main\") : setCurrentPage(\"login\");\r\n    }\r\n\r\n    async function registerSubmit(ev, email, password, username) {\r\n        ev.preventDefault();\r\n        const data = await axios.post(\"http://localhost:4000/api/v1/user\", {\r\n            email,\r\n            password,\r\n            name: username,\r\n        });\r\n        localStorage.setItem(\"token\", data.data);\r\n        checkIfLoggedIn();\r\n    }\r\n    async function loginSubmit(ev, password, username) {\r\n        ev.preventDefault();\r\n\r\n        const login = await axios.post(\"http://localhost:4000/api/v1/user/login\", {\r\n            name: username,\r\n            password: password,\r\n        });\r\n        console.log(password);\r\n        localStorage.setItem(\"token\", login.data);\r\n        checkIfLoggedIn();\r\n    }\r\n\r\n    function logOut() {\r\n        localStorage.removeItem(\"token\");\r\n        checkIfLoggedIn();\r\n    }\r\n\r\n    async function showAllCourses() {\r\n        const { data } = await axios.get(\"http://localhost:4000/api/v1/courses\");\r\n        return data;\r\n    }\r\n\r\n    async function showAllUserCourses() {\r\n        const token = localStorage.getItem(\"token\");\r\n        const courses = await axios.post(\"http://localhost:4000/api/v1/user/courses\", {\r\n            token: token,\r\n        });\r\n        console.log(courses.data);\r\n        setUserCourses(courses.data);\r\n    }\r\n\r\n    async function showAllSubjects() {\r\n        const subjects = await axios.get(\"http://localhost:4000/api/v1/subjects\");\r\n        try {\r\n            setSubjects(subjects.data);\r\n        } catch (err) {\r\n            console.log(err.message);\r\n        }\r\n    }\r\n\r\n    async function deleteCourse(courseName) {\r\n        const token = localStorage.getItem(\"token\");\r\n        const headers = {\r\n            token: token,\r\n            courseName: courseName,\r\n        };\r\n        const deleteRequest = await axios.delete(\"http://localhost:4000/api/v1/user\", { headers });\r\n        console.log(deleteRequest);\r\n    }\r\n\r\n    async function addCourse(subject) {\r\n        const token = localStorage.getItem(\"token\");\r\n        const newCourse = await axios.post(\"http://localhost:4000/api/v1/courses\", { token, subject });\r\n        console.log(newCourse);\r\n    }\r\n\r\n    async function changePasswordSubmit(ev, email, password) {\r\n        ev.preventDefault();\r\n\r\n        const token = localStorage.getItem(\"token\");\r\n        const login = await axios.post(\"http://localhost:4000/api/v1/user/changePassword\", {\r\n            email: email,\r\n            password: password,\r\n            token: token,\r\n        });\r\n        console.log(password);\r\n        checkIfLoggedIn();\r\n    }\r\n\r\n    return (\r\n        <CoursesContext.Provider\r\n            value={{\r\n                registerSubmit,\r\n                loginSubmit,\r\n                currentPage,\r\n                setCurrentPage,\r\n                checkIfLoggedIn,\r\n                logOut,\r\n                showAllCourses,\r\n                showAllSubjects,\r\n                subjects,\r\n                showAllUserCourses,\r\n                userCourses,\r\n                deleteCourse,\r\n                addCourse,\r\n                changePasswordSubmit,\r\n            }}\r\n        >\r\n            <App />\r\n        </CoursesContext.Provider>\r\n    );\r\n};\r\n\r\nexport default ContextProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}